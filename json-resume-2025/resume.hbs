<html lang="{{lang}}">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{{resume.basics.name}} - Resume</title>

    <!-- 字體和必要的 CDN -->
    <link
      href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@400;600&family=Noto+Sans+TC:wght@400;500;700&display=swap"
      rel="stylesheet"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"
    ></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />

    <style>
      {{{css}}}

      /* 列印優化樣式 */ @media print { .no-print { display: none; } body {
      font-size: 12pt; } a { text-decoration: none; color: #000; } } /*
      響應式設計 */ @media (max-width: 768px) { .container { padding: 10px; } }
    </style>
  </head>
  <body>
    <!-- 語言切換器 -->
    <div class="language-switcher no-print">
      <button onclick="switchLanguage('en')">English</button>
      <button onclick="switchLanguage('zh')">中文</button>
    </div>

    <div class="container">
      <!-- 個人資料區塊 -->
      <header class="profile-header">
        <div class="profile-image">
          <img src="{{resume.basics.image}}" alt="{{resume.basics.name}}" />
        </div>
        <div class="profile-info">
          <h1>{{resume.basics.name}}</h1>
          <h2>{{resume.basics.label}}</h2>
          <p>{{resume.basics.summary}}</p>
          <div class="contact-links">
            {{#each resume.basics.profiles}}
              <a href="{{this.url}}" target="_blank">
                <i class="fab fa-{{toLowerCase this.network}}"></i>
                {{this.network}}
              </a>
            {{/each}}
          </div>
        </div>
      </header>

      <!-- 技能 -->
      <section class="skills-section">
        <h3>Technical Proficiency</h3>
        {{#each resume.skills}}
          <h4>{{this.name}}</h4>
          <ul>
            {{#each this.keywords}}
              <li>{{this}}</li>
            {{/each}}
          </ul>
        {{/each}}
      </section>

      <!-- 工作經驗 -->
      <section class="timeline">
        <h3>Career Journey</h3>
        {{#each resume.work}}
          <div class="timeline-item">
            <div class="timeline-content">
              <h3>{{this.name}}</h3>
              <p class="timeline-date">{{this.startDate}} - {{this.endDate}}</p>
              <p>{{this.position}}</p>
              <div class="highlights">
                {{#each this.highlights}}
                  <p>
                    <i class="fas fa-check"></i>
                    {{#if (isYouTubeLink this)}}
                      <a
                        href="https://www.youtube.com/watch?v={{extractYouTubeId
                          this
                        }}"
                        target="_blank"
                      >
                        {{removeYouTubeUrl this}}
                      </a>
                    {{else}}
                      {{this}}
                    {{/if}}
                  </p>
                {{/each}}
              </div>
            </div>
          </div>
        {{/each}}
      </section>

      <!-- 教育 -->
      <section class="education-section">
        <h3>Education</h3>
        {{#each resume.education}}
          <div class="education-item">
            <h4>{{this.name}}</h4>
            <p>{{this.area}}, {{this.studyType}}</p>
            <p class="education-date">{{formatDate this.startDate}}
              -
              {{formatDate this.endDate}}</p>
          </div>
        {{/each}}
      </section>

      <!-- 獎項 -->
      <section class="awards-section">
        <h3>Awards</h3>
        {{#each resume.awards}}
          <div class="award-item">
            <h4>{{this.title}}</h4>
            <p>{{this.awarder}} - {{formatDate this.date}}</p>
            <p>{{this.summary}}</p>
          </div>
        {{/each}}
      </section>

      <!-- 成就 -->
      <section class="achievements-section">
        <h3>Key Achievements</h3>
        {{#each resume.achievements}}
          <div class="achievement-item">
            <h4>{{this.title}}</h4>
            <p>{{this.description}}</p>
            {{#if this.url}}
              <a href="{{this.url}}" target="_blank">More details</a>
            {{/if}}
          </div>
        {{/each}}
      </section>
    </div>

    <!-- JavaScript -->
    <script>
      mermaid.initialize({ startOnLoad: true, theme: 'default' });
    </script>
  </body>
</html>